---
title: "PML2014"
author: "Irus Grinis"
date: "2014.07.25"
output: html_document
---

Load and clear training data:
```{r}
rm(list=ls())
library(caret)
set.seed(1341)
myData <- read.csv("pml-training.csv", na.strings=c("NA","NULL","#DIV/0!"))

#Choose appropriated columns:
clearData <- myData[,colSums(is.na(myData))==0]

myTest <- read.csv("pml-testing.csv")
 colnames(myTest)[ncol(myTest)] <- 'classe'
 myTest$classe <- NA
 testingOuter <- myTest


for(i in 1:30){
 inTrain <- createDataPartition(y=clearData$classe,
                              p=0.08, list=FALSE)
 training <- clearData[inTrain,-c(1:6)]
 testingInner <- clearData[-inTrain,]

 




##Apply the random forests method:


 modelFit <- train(classe~ ., data=training, method="rf", prox=TRUE)
#modelFit

#pred1 <- predict(modelFit,testingInner)
#testingInner$predRight <- pred1==testingInner$classe
#table(pred1,testingInner$classe)

 pred2 <- predict(modelFit,testingOuter)
#testingInner$predRight <- pred2==testingOuter$classe
#table(pred1,testingOuter$classe)
 print(pred2)
}

```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.

